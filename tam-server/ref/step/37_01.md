# 37_01 - Application Server 구조로 변경 : Protocol-01 에 따라 통신하는 서버 만들기

## 학습목표

- Application Server 아키텍쳐의 구성과 특징을 이해한다.
- 통신 프로토콜 규칙에 따라 동작하는 서버를 만들 수 있다.

## 실습 소스 및 결과
- src/main/java/kyh/tam/ServerApp.java 변경

## 실습  

#### 실습 1 : 클라이언트와 서버 사이의 통신 규칙을 정한다.

- 요청과 응답은 `Stateless` 방식으로 처리한다. 
- 클라이언트가 요청할 때 서버와 연결하고, 서버에서 응답하면 연결을 끊는다.

Protocol-01) 단순한 명령어 전송과 실행 결과 수신
```
[Client]                                          [Server]
서버에 연결 요청         -------------->           연결 승인
명령(CRLF)              -------------->           명령처리
화면 출력               <--------------           응답(CRLF)
화면 출력               <--------------           응답(CRLF)
명령어 실행 완료         <--------------          !end!(CRLF)
서버와 연결 끊기
```

#### 실습 2 : Protocol-01 에 따라 클라이언트의 요청에 응답한다.
- com.kyh.tam.ServerApp 변경
  - 클라이언트 요청에 대해 간단한 인사말을 출력하도록 변경한다.

#### 추가사항
기존의 ObjectInputStream / ObjectOutputStream 사용을 BufferedReader / BufferedWrier로 변경한다.
일차적으로 클라이언트와 간단한 메시지 송수신을 통해 데이터 전송을 확립한다.
주의할 점은 클라이언트가 readLine() 메소드를 통해 서버의 메시지를 수신하는데, BufferedWriter 객체에 개행문자를 포함해 문자열을 전송하는 메서드가 없다. 따라서 `System.lineSeparator()` 메서드를 통해 시스템에 따른 개행문자를 메시지의 끝에 붙여서 송신한다.

**Application Server**
- 서버사이드 코드를 이용해서 동적인 컨텐츠를 생성하는 서버
- 기존의 클라이언트에서 하던 데이터베이스 관련 작업을 서버에서 수행한다.
- 관련 작업이 바뀔때마다 클라이언트를 새로 배포할 필요가 없다.
  - 클라이언트는 단순히 서버에게 명령만 전달하며, 명령에 해당하는 각 기능은 서버의 Servlet이 처리한다.
  - 클라이언트로 웹 브라우저를 사용하기 위한 시작점